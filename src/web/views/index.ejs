<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title><%= title %></title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
    <link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.18.3/dist/bootstrap-table.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>

<div class="container-fluid mt-5">
    <div class="buttons-toolbar">
    </div>

    <div class="mt-3">
        <table id="tableMain" class="table"
               data-show-refresh="true"
               data-show-columns="true"
               data-buttons-toolbar=".buttons-toolbar"
               data-buttons-align="left"
               data-show-columns-toggle-all="true"

               data-toggle="table"
               data-ajax="ajaxRequest"
               data-search="true"
               data-search-accent-neutralise="true"
               data-search-highlight="true"
               data-search-on-enter-key="true"
               data-show-search-button="true"
               data-side-pagination="server"
               data-pagination="true">
            <thead>
            <tr>
                <th scope="col" data-visible="false" data-field="id">Id</th>
                <th scope="col" data-field="messageDate">Message time</th>
                <th scope="col" data-field="channelName">ChannelName</th>
                <th scope="col" data-visible="false" data-field="channelId">ChannelId</th>
                <th scope="col" data-field="userName">Username</th>
                <th scope="col" data-visible="false" data-field="userId">UserId</th>
                <th scope="col" data-field="userMessage">Message</th>
            </tr>
            </thead>
            <tbody id="tableBody">

            </tbody>
        </table>
    </div>
</div>

<script>
    function ajaxRequest(params) {
        const key = '<%= key %>';
        const url = window.location.origin + '/api/user_message/' + key
        $.get(url + '?' + $.param(params.data)).then(function (res) {
            params.success(res)
        })
    }
</script>
</body>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj"
        crossorigin="anonymous"></script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="https://unpkg.com/bootstrap-table@1.18.3/dist/bootstrap-table.min.js"></script>
</html>